{{ define "body-class" }} article-page {{/* Enable the right sidebar if - Widget
different from 'TOC' is enabled - TOC is enabled and not empty */}} {{-
$HasWidgetNotTOC := false -}} {{- $TOCWidgetEnabled := false -}} {{- range
.Site.Params.widgets.page -}} {{- if ne .type "toc" -}} {{ $HasWidgetNotTOC =
true -}} {{- else -}} {{ $TOCWidgetEnabled = true -}} {{- end -}} {{- end -}}
{{- $TOCManuallyDisabled := eq .Params.toc false -}} {{- $TOCEnabled := and (not
$TOCManuallyDisabled) $TOCWidgetEnabled -}} {{- $hasTOC := ge (len
.TableOfContents) 100 -}} {{- .Scratch.Set "TOCEnabled" (and $TOCEnabled
$hasTOC) -}} {{- .Scratch.Set "hasWidget" (or $HasWidgetNotTOC (and $TOCEnabled
$hasTOC)) -}} {{ end }} {{ define "main" }} {{ partial "article/article.html" .
}} {{ if .Params.links }} {{ partial "article/components/links" . }} {{ end }}
{{ partial "article/components/related-content" . }} {{ if not (eq
.Params.comments false) }} {{ partial "comments/include" . }} {{ end }} {{
partialCached "footer/footer" . }} {{ partialCached
"article/components/photoswipe" . }} {{ end }} {{ define "right-sidebar" }} {{
if .Scratch.Get "hasWidget" }} {{ partial "sidebar/right.html" (dict "Context" .
"Scope" "page") }}{{ end}} {{ end }} {{ define "right-sidebar" }} {{ if
(.Scratch.Get "hasTOC") }}
<aside class="sidebar right-sidebar sticky">
  <section class="widget archives">
    <div class="widget-icon">{{ partial "helper/icon" "hash" }}</div>
    <h2 class="widget-title section-title">
      {{ T "article.tableOfContents" }}
    </h2>

    <div class="widget--toc">{{ .TableOfContents }}</div>
  </section>

  {{ $topImg := resources.Get ("img/top.png") }} {{ $topImg := $topImg.Resize
  "40x" }}
  <a id="back-to-top" href="#">
    <img src="{{ $topImg.RelPermalink }}" />
  </a>
</aside>
{{ end }} {{ end }}
